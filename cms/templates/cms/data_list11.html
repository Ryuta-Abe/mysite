
{% extends "base.html" %}

{% block title %}データ一覧{% endblock title %}

{% block extrahead %}
<style>
table {
  margin-top: 8px;
}

div.bar {
   display: inline-block;
   width: 60px;
   height: 75px;   /* この数値は実行時に上書きされます */
   background-color: teal;
   margin-right: 2px;
}

</style>
		<meta charset="utf-8">
         <title>D3 Test</title>
         <script type="text/javascript" src="d3/d3.v3.js"></script>
{% endblock %}

{% block content %}
   
	    
	    <script type="text/javascript">
	      

			   var dataset = [];                          // 配列の宣言と初期化
   {% for s in t %} {          // ループを25回繰り返す
      var newNumber = {{ s.ilu }};  // 0～30のランダムな数を生成
      dataset.push(newNumber);             // 生成した数を配列に追加
   }
{% endfor %}

   // 幅（ Width ）と高さ（ height ）
   var w = 1250;
   var h = 300;
   var barPadding = 1;

   // SVG 要素の生成
   var svg = d3.select("body")
         .append("svg")
         .attr("width", w)
         .attr("height", h);

   var color = d3.scale.linear()
    .domain([0, 900])
    .range(["darkbrown", "yellow"])
    .interpolate(d3.interpolateLab);

   svg.selectAll("rect")
         .data(dataset)
         .enter()
         .append("rect")
         .attr("x", function(d, i) {
            return i * (w / dataset.length);
         })
         .attr("y", function(d) {
            return h - (d * 0.2);
         })
         .attr("width", w / dataset.length - barPadding)
         .attr("height", function(d) {
            return d * 0.2;
         })
         .attr("fill", function(d) {
         	return color(d);
     //       return "hsb(" + 100 + "°, " +100 + "%, " + 100 + "%)";
    //        return "colorMode(RGB,360,100,100)";
         });

   svg.selectAll("text")
         .data(dataset)
         .enter()
         .append("text")
         .text(function(d) {
            return d.toFixed(1);
         })
         .attr("x", function(d, i) {
            return i * (w / dataset.length) + 5;
         })
         .attr("y", function(d) {
            return h - (d * 0.2) + 15;
         })
         .attr("font-family", "sans-serif")
         .attr("font-size", "10px")
         .attr("fill", "red");



         </script>
         
{% endblock content %}




